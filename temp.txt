# RISC-V CSR template for riscv-dv
# CSRs: sstatus, stvec, sie, sip, scounteren, stval, satp, sscratch, sepc, senvcfg, scause

- csr: sstatus
  description: >
    Supervisor Status Register
  address: 0x100
  privilege_mode: S
  rv32:
    - field_name: XS
      description: >
        Extensions status (implementation defined)
      type: WPRI
      reset_val: 0
      msb: 16
      lsb: 15
    - field_name: FS
      description: >
        Floating-point status
      type: WPRI
      reset_val: 0
      msb: 14
      lsb: 13
    - field_name: VS
      description: >
        Vector/extension save-needed status (if supported)
      type: WPRI
      reset_val: 0
      msb: 11
      lsb: 10
    - field_name: SPP
      description: >
        Supervisor Previous Privilege (0=U, 1=S)
      type: WARL
      reset_val: 0
      msb: 8
      lsb: 8
    - field_name: UBE
      description: >
        User-endianness (big-endian if 1)
      type: WARL
      reset_val: 0
      msb: 6
      lsb: 6
    - field_name: SPIE
      description: >
        Supervisor Previous Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SIE
      description: >
        Supervisor Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: SUM
      description: >
        Permit S-mode to access U-mode memory
      type: WARL
      reset_val: 0
      msb: 18
      lsb: 18
    - field_name: MXR
      description: >
        Make eXecutable Readable
      type: WARL
      reset_val: 0
      msb: 19
      lsb: 19

  rv64:
    - field_name: UXL
      description: >
        U-mode XLEN setting (WARL, encodes 32/64 etc.)
      type: WARL
      reset_val: 0
      msb: 33
      lsb: 32
    - field_name: XS
      description: >
        Extensions status (implementation defined)
      type: WPRI
      reset_val: 0
      msb: 16
      lsb: 15
    - field_name: FS
      description: >
        Floating-point status
      type: WPRI
      reset_val: 0
      msb: 14
      lsb: 13
    - field_name: VS
      description: >
        Vector/extension save-needed status (if supported)
      type: WPRI
      reset_val: 0
      msb: 11
      lsb: 10
    - field_name: SPP
      description: >
        Supervisor Previous Privilege (0=U, 1=S)
      type: WARL
      reset_val: 0
      msb: 8
      lsb: 8
    - field_name: UBE
      description: >
        User-endianness (big-endian if 1)
      type: WARL
      reset_val: 0
      msb: 6
      lsb: 6
    - field_name: SPIE
      description: >
        Supervisor Previous Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SIE
      description: >
        Supervisor Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: SUM
      description: >
        Permit S-mode to access U-mode memory
      type: WARL
      reset_val: 0
      msb: 18
      lsb: 18
    - field_name: MXR
      description: >
        Make eXecutable Readable
      type: WARL
      reset_val: 0
      msb: 19
      lsb: 19

- csr: stvec
  description: >
    Supervisor Trap Vector Base Address Register (BASE + MODE)
  address: 0x105
  privilege_mode: S
  rv32:
    - field_name: BASE
      description: >
        Vector base address (stored as BASE[31:2], low bits implied zero)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 2
    - field_name: MODE
      description: >
        Vector mode encoding (0=Direct, 1=Vectored)
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 0
  rv64:
    - field_name: BASE
      description: >
        Vector base address (stored as BASE[63:2], low bits implied zero)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 2
    - field_name: MODE
      description: >
        Vector mode encoding (0=Direct, 1=Vectored)
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 0

- csr: sie
  description: >
    Supervisor Interrupt Enable (global per interrupt source bits)
  address: 0x104
  privilege_mode: S
  rv32:
    - field_name: SEIE
      description: >
        Supervisor External Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIE
      description: >
        Supervisor Timer Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIE
      description: >
        Supervisor Software Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
  rv64:
    - field_name: SEIE
      description: >
        Supervisor External Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIE
      description: >
        Supervisor Timer Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIE
      description: >
        Supervisor Software Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1

- csr: sip
  description: >
    Supervisor Interrupt Pending (pending bits mirror sie)
  address: 0x144
  privilege_mode: S
  rv32:
    - field_name: SEIP
      description: >
        Supervisor External Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIP
      description: >
        Supervisor Timer Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIP
      description: >
        Supervisor Software Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 1
      lsb: 1
  rv64:
    - field_name: SEIP
      description: >
        Supervisor External Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIP
      description: >
        Supervisor Timer Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIP
      description: >
        Supervisor Software Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 1
      lsb: 1

- csr: scounteren
  description: >
    Supervisor Counter-Enable Register (controls U-mode access to counters)
  address: 0x106
  privilege_mode: S
  rv32:
    - field_name: HPM31
      description: >
        HPM31 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: HPM30
      description: >
        HPM30 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 30
    - field_name: HPM29
      description: >
        HPM29 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 29
      lsb: 29
    # ... HPM bits down to HPM3
    - field_name: HPM3
      description: >
        HPM3 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: IR
      description: >
        instret read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: TM
      description: >
        time read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CY
      description: >
        cycle read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
  rv64:
    - field_name: HPM31
      description: >
        HPM31 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: HPM30
      description: >
        HPM30 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 30
    - field_name: HPM29
      description: >
        HPM29 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 29
      lsb: 29
    - field_name: HPM3
      description: >
        HPM3 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: IR
      description: >
        instret read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: TM
      description: >
        time read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CY
      description: >
        cycle read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0

- csr: stval
  description: >
    Supervisor Trap Value register (holds faulting VA or other info)
  address: 0x143
  privilege_mode: S
  rv32:
    - field_name: stval
      description: >
        Trap-specific information / faulting address (SXLEN bits)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: stval
      description: >
        Trap-specific information / faulting address (SXLEN bits)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: satp
  description: >
    Supervisor Address Translation and Protection register (MODE, ASID, PPN)
  address: 0x180
  privilege_mode: S
  rv32:
    - field_name: MODE
      description: >
        Translation mode (0=Bare, 1=Sv32)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: ASID
      description: >
        Address Space ID (implementation defined ASIDLEN, up to 9 for Sv32)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 22
    - field_name: PPN
      description: >
        Physical Page Number of root page table (PPN)
      type: WARL
      reset_val: 0
      msb: 21
      lsb: 0
  rv64:
    - field_name: MODE
      description: >
        Translation mode (0=Bare, 8=Sv39, 9=Sv48, 10=Sv57, ...)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 60
    - field_name: ASID
      description: >
        Address Space ID (implementation defined ASIDLEN, up to 16 for Sv39/48)
      type: WARL
      reset_val: 0
      msb: 59
      lsb: 44
    - field_name: PPN
      description: >
        Physical Page Number of root page table (PPN)
      type: WARL
      reset_val: 0
      msb: 43
      lsb: 0

- csr: sscratch
  description: >
    Supervisor Scratch register (hart-local scratch for trap handlers)
  address: 0x140
  privilege_mode: S
  rv32:
    - field_name: sscratch
      description: >
        Scratch value for supervisor (full SXLEN)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: sscratch
      description: >
        Scratch value for supervisor (full SXLEN)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: sepc
  description: >
    Supervisor Exception Program Counter (holds return PC on trap)
  address: 0x141
  privilege_mode: S
  rv32:
    - field_name: sepc
      description: >
        Exception PC (low bit(s) masked according to IALIGN)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: sepc
      description: >
        Exception PC (low bit(s) masked according to IALIGN)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: senvcfg
  description: >
    Supervisor Environment Configuration (controls certain U-mode behavior)
  address: 0x10A
  privilege_mode: S
  rv32:
    - field_name: FIOM
      description: >
        Fence-of-I/O implies Memory in U-mode when set
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
    - field_name: CBZE
      description: >
        Cache block zero extension (defined by Zicboz) - placeholder
      type: WPRI
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CBCFE
      description: >
        Cache block cache flush extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: CBIE
      description: >
        Cache block invalidate extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: RESERVED
      description: >
        Reserved / other extension-defined bits
      type: WPRI
      reset_val: 0
      msb: 31
      lsb: 4
  rv64:
    - field_name: FIOM
      description: >
        Fence-of-I/O implies Memory in U-mode when set
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
    - field_name: CBZE
      description: >
        Cache block zero extension (defined by Zicboz) - placeholder
      type: WPRI
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CBCFE
      description: >
        Cache block cache flush extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: CBIE
      description: >
        Cache block invalidate extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: RESERVED
      description: >
        Reserved / other extension-defined bits
      type: WPRI
      reset_val: 0
      msb: 63
      lsb: 4

- csr: scause
  description: >
    Supervisor Cause register (Interrupt bit + Exception code)
  address: 0x142
  privilege_mode: S
  rv32:
    - field_name: Interrupt
      description: >
        Interrupt indicator (1=interrupt, 0=exception)
      type: WLRL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: ExceptionCode
      description: >
        Exception/interrupt code (WLRL, must implement bits 4:0)
      type: WLRL
      reset_val: 0
      msb: 30
      lsb: 0
  rv64:
    - field_name: Interrupt
      description: >
        Interrupt indicator (1=interrupt, 0=exception)
      type: WLRL
      reset_val: 0
      msb: 63
      lsb: 63
    - field_name: ExceptionCode
      description: >
        Exception/interrupt code (WLRL, must implement bits 4:0)
      type: WLRL
      reset_val: 0
      msb: 62
      lsb: 0

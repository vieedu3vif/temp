# RISC-V S-mode CSR configuration for riscv-dv (based on Privileged Spec 20211203)
# NOTE: Fill fields exactly per spec. This file is incomplete until sstatus is corrected.
- csr: sstatus
  description: >
    Supervisor status register
  address: 0x100
  privilege_mode: S
  rv64:
    - field_name: SD
      description: >
        Read-only dirty summary bit. SD = (FS==11) OR (XS==11) OR (VS==11)
      type: R
      reset_val: 0
      msb: 63
      lsb: 63

    - field_name: WPRI_62_34
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 62
      lsb: 34

    - field_name: UXL
      description: >
        Controls XLEN for U-mode.
        01=32-bit (default), 10=64-bit
      type: WARL
      reset_val: 1
      msb: 33
      lsb: 32

    - field_name: WPRI_31_20
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 31
      lsb: 20

    - field_name: MXR
      description: Modify privilege for load access to virtual memory
      type: WARL
      reset_val: 0
      msb: 19
      lsb: 19

    - field_name: SUM
      description: Modify privilege for S-mode load/store access to VM
      type: WARL
      reset_val: 0
      msb: 18
      lsb: 18

    - field_name: WPRI_17
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 17
      lsb: 17

    - field_name: XS
      description: Additional user-mode extension state
      type: R
      reset_val: 0
      msb: 16
      lsb: 15

    - field_name: FS
      description: Floating-point unit state
      type: WARL
      reset_val: 0
      msb: 14
      lsb: 13

    - field_name: WPRI_12_11
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 12
      lsb: 11

    - field_name: VS
      description: Vector extension state
      type: WARL
      reset_val: 0
      msb: 10
      lsb: 9

    - field_name: SPP
      description: Previous privilege mode (0=U, 1=S)
      type: WARL
      reset_val: 0
      msb: 8
      lsb: 8

    - field_name: WPRI_7
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 7
      lsb: 7

    - field_name: UBE
      description: Endianness for U-mode (0=little endian)
      type: WARL
      reset_val: 0
      msb: 6
      lsb: 6

    - field_name: SPIE
      description: Previous S-mode interrupt-enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5

    - field_name: WPRI_4_3
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 4
      lsb: 3

    - field_name: SIE
      description: Supervisor interrupt enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1

    - field_name: WPRI_0
      description: Reserved
      type: WPRI
      reset_val: 0
      msb: 0
      lsb: 0


- csr: stvec
  description: >
    Supervisor Trap Vector Base Address Register (BASE + MODE)
  address: 0x105
  privilege_mode: S
  rv32:
    - field_name: BASE
      description: >
        Vector base address (stored as BASE[31:2], low bits implied zero)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 2
    - field_name: MODE
      description: >
        Vector mode encoding (0=Direct, 1=Vectored)
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 0
  rv64:
    - field_name: BASE
      description: >
        Vector base address (stored as BASE[63:2], low bits implied zero)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 2
    - field_name: MODE
      description: >
        Vector mode encoding (0=Direct, 1=Vectored)
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 0

- csr: sie
  description: >
    Supervisor Interrupt Enable (global per interrupt source bits)
  address: 0x104
  privilege_mode: S
  rv32:
    - field_name: SEIE
      description: >
        Supervisor External Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIE
      description: >
        Supervisor Timer Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIE
      description: >
        Supervisor Software Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
  rv64:
    - field_name: SEIE
      description: >
        Supervisor External Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIE
      description: >
        Supervisor Timer Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIE
      description: >
        Supervisor Software Interrupt Enable
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1

- csr: sip
  description: >
    Supervisor Interrupt Pending (pending bits mirror sie)
  address: 0x144
  privilege_mode: S
  rv32:
    - field_name: SEIP
      description: >
        Supervisor External Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIP
      description: >
        Supervisor Timer Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIP
      description: >
        Supervisor Software Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 1
      lsb: 1
  rv64:
    - field_name: SEIP
      description: >
        Supervisor External Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 9
      lsb: 9
    - field_name: STIP
      description: >
        Supervisor Timer Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 5
      lsb: 5
    - field_name: SSIP
      description: >
        Supervisor Software Interrupt Pending
      type: WLRL
      reset_val: 0
      msb: 1
      lsb: 1

- csr: scounteren
  description: >
    Supervisor Counter-Enable Register (controls U-mode access to counters)
  address: 0x106
  privilege_mode: S
  rv32:
    - field_name: HPM31
      description: >
        HPM31 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: HPM30
      description: >
        HPM30 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 30
    - field_name: HPM29
      description: >
        HPM29 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 29
      lsb: 29
    # ... HPM bits down to HPM3
    - field_name: HPM3
      description: >
        HPM3 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: IR
      description: >
        instret read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: TM
      description: >
        time read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CY
      description: >
        cycle read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
  rv64:
    - field_name: HPM31
      description: >
        HPM31 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: HPM30
      description: >
        HPM30 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 30
    - field_name: HPM29
      description: >
        HPM29 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 29
      lsb: 29
    - field_name: HPM3
      description: >
        HPM3 enable for U-mode (if implemented)
      type: WARL
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: IR
      description: >
        instret read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: TM
      description: >
        time read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CY
      description: >
        cycle read enable for U-mode
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0

- csr: stval
  description: >
    Supervisor Trap Value register (holds faulting VA or other info)
  address: 0x143
  privilege_mode: S
  rv32:
    - field_name: stval
      description: >
        Trap-specific information / faulting address (SXLEN bits)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: stval
      description: >
        Trap-specific information / faulting address (SXLEN bits)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: satp
  description: >
    Supervisor Address Translation and Protection register (MODE, ASID, PPN)
  address: 0x180
  privilege_mode: S
  rv32:
    - field_name: MODE
      description: >
        Translation mode (0=Bare, 1=Sv32)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: ASID
      description: >
        Address Space ID (implementation defined ASIDLEN, up to 9 for Sv32)
      type: WARL
      reset_val: 0
      msb: 30
      lsb: 22
    - field_name: PPN
      description: >
        Physical Page Number of root page table (PPN)
      type: WARL
      reset_val: 0
      msb: 21
      lsb: 0
  rv64:
    - field_name: MODE
      description: >
        Translation mode (0=Bare, 8=Sv39, 9=Sv48, 10=Sv57, ...)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 60
    - field_name: ASID
      description: >
        Address Space ID (implementation defined ASIDLEN, up to 16 for Sv39/48)
      type: WARL
      reset_val: 0
      msb: 59
      lsb: 44
    - field_name: PPN
      description: >
        Physical Page Number of root page table (PPN)
      type: WARL
      reset_val: 0
      msb: 43
      lsb: 0

- csr: sscratch
  description: >
    Supervisor Scratch register (hart-local scratch for trap handlers)
  address: 0x140
  privilege_mode: S
  rv32:
    - field_name: sscratch
      description: >
        Scratch value for supervisor (full SXLEN)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: sscratch
      description: >
        Scratch value for supervisor (full SXLEN)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: sepc
  description: >
    Supervisor Exception Program Counter (holds return PC on trap)
  address: 0x141
  privilege_mode: S
  rv32:
    - field_name: sepc
      description: >
        Exception PC (low bit(s) masked according to IALIGN)
      type: WARL
      reset_val: 0
      msb: 31
      lsb: 0
  rv64:
    - field_name: sepc
      description: >
        Exception PC (low bit(s) masked according to IALIGN)
      type: WARL
      reset_val: 0
      msb: 63
      lsb: 0

- csr: senvcfg
  description: >
    Supervisor Environment Configuration (controls certain U-mode behavior)
  address: 0x10A
  privilege_mode: S
  rv32:
    - field_name: FIOM
      description: >
        Fence-of-I/O implies Memory in U-mode when set
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
    - field_name: CBZE
      description: >
        Cache block zero extension (defined by Zicboz) - placeholder
      type: WPRI
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CBCFE
      description: >
        Cache block cache flush extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: CBIE
      description: >
        Cache block invalidate extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: RESERVED
      description: >
        Reserved / other extension-defined bits
      type: WPRI
      reset_val: 0
      msb: 31
      lsb: 4
  rv64:
    - field_name: FIOM
      description: >
        Fence-of-I/O implies Memory in U-mode when set
      type: WARL
      reset_val: 0
      msb: 0
      lsb: 0
    - field_name: CBZE
      description: >
        Cache block zero extension (defined by Zicboz) - placeholder
      type: WPRI
      reset_val: 0
      msb: 1
      lsb: 1
    - field_name: CBCFE
      description: >
        Cache block cache flush extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 2
      lsb: 2
    - field_name: CBIE
      description: >
        Cache block invalidate extension (Zicbom related) - placeholder
      type: WPRI
      reset_val: 0
      msb: 3
      lsb: 3
    - field_name: RESERVED
      description: >
        Reserved / other extension-defined bits
      type: WPRI
      reset_val: 0
      msb: 63
      lsb: 4

- csr: scause
  description: >
    Supervisor Cause register (Interrupt bit + Exception code)
  address: 0x142
  privilege_mode: S
  rv32:
    - field_name: Interrupt
      description: >
        Interrupt indicator (1=interrupt, 0=exception)
      type: WLRL
      reset_val: 0
      msb: 31
      lsb: 31
    - field_name: ExceptionCode
      description: >
        Exception/interrupt code (WLRL, must implement bits 4:0)
      type: WLRL
      reset_val: 0
      msb: 30
      lsb: 0
  rv64:
    - field_name: Interrupt
      description: >
        Interrupt indicator (1=interrupt, 0=exception)
      type: WLRL
      reset_val: 0
      msb: 63
      lsb: 63
    - field_name: ExceptionCode
      description: >
        Exception/interrupt code (WLRL, must implement bits 4:0)
      type: WLRL
      reset_val: 0
      msb: 62
      lsb: 0
